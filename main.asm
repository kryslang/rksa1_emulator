regwrite reg_a start
jmp reg_a
down:
regwrite 0x09 0x00 'D'
regwrite 0x11 0x00 0x02
ramr 0x11 0x12
inc 0x12
ramw 0x11 0x12
ret
up:
regwrite 0x09 0x00 'U'
regwrite 0x11 0x00 0x02
ramr 0x11 0x12
dec 0x12
ramw 0x11 0x12
ret
left:
regwrite 0x09 0x00 'L'
regwrite 0x11 0x00 0x01
ramr 0x11 0x12
inc 0x12
ramw 0x11 0x12
ret
right:
regwrite 0x09 0x00 'R'
regwrite 0x11 0x00 0x01
ramr 0x11 0x12
inc 0x12
ramw 0x11 0x12
ret
start:
regwrite 0x10 cont
regwrite 0x06 0x11 0x11
regwrite 0x05 up
jpie 0x05 0x06 iport
regwrite 0x10 cont
regwrite 0x06 0x22 0x22
regwrite 0x05 left
jpie 0x05 0x06 iport
regwrite 0x10 cont
regwrite 0x06 0x33 0x33
regwrite 0x05 down
jpie 0x05 0x06 iport
regwrite 0x10 cont
regwrite 0x06 0x44 0x44
regwrite 0x05 right
jpie 0x05 0x06 iport
cont:
regwrite 0x11 0x00 0x01
regwrite 0x12 0x00 0x02
regwrite 0x02 0x00 0x40
ramr 0x11 0x11
ramr 0x12 0x12
mul 0x02 0x12
add 0x01 0x11
add 0x01 0x13
regwrite 0x02 0x00 0xe0
ramw 0x01 0x02
regmov 0x01 0x04
regwrite 0x0a start
jmp 0x0a